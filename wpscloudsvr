#!/bin/bash

# 启动 wpscloudsvr.real，并传递所有参数
./wpscloudsvr.real "$@" &
WPSCLOUD_PID=$!

echo "wpscloudsvr.real 启动，PID: $WPSCLOUD_PID"

# 循环检测 wpsoffice 相关进程
while true; do
    if pgrep -f "wpsoffice" > /dev/null; then
        sleep 60  # 等待 1 分钟
    else
        break  # 没有 wpsoffice 进程时退出循环
    fi
done

# 结束 wpscloudsvr 进程
kill "$WPSCLOUD_PID"
echo "wpscloudsvr 进程已终止"

